{{if (mode == 'box' || mode == 'box-time')}}
<div class="clearfix pipeline {{if editable}} pipeline-editable {{/if}}" 
    style="--mx-effects-pipeline-color: {{=color}};">
    {{if img}}
    <div class="pipeline-logo">
        <div class="pipeline-logo-inner" style="background-image: url({{=img}});"></div>
    </div>
    {{/if}}
    <div class="pipeline-boxs">
        {{each list as item index}}
        <div class="pipeline-box 
            {{if (item.value == selected)}} pipeline-cur {{/if}} 
            {{if item.highlight}} pipeline-highlight {{/if}} 
            {{if item.disabled}} pipeline-disabled {{/if}}"
            {{if (editable && !item.disabled)}} mx-click="@{select.parent}({index:'{{=index}}'})"  {{/if}} >
            <div class="pipeline-title">
                {{!item.text}}
                {{if item.icon}}<img src="{{=item.icon}}"/>{{/if}}
                {{if item.iconTip}}<mx-popover class="mc-iconfont mc-tip-iconfont" content="{{=item.iconTip}}">&#xe72f;</mx-popover>{{/if}}
            </div> 
            <div class="pipeline-sub-title">{{!item.tip}}</div>
            <div class="pipeline-gradient-bg" style="background-image: linear-gradient(180deg, {{=color0}} 0%, {{=color2}} 99%);"></div>
            <div class="pipeline-spliter" style="background-image: linear-gradient(180deg, {{=color0}} 0%, {{=color2}} 99%);"></div>
        </div>
        {{/each}}
        <div class="pipeline-boxs-bg" style="background-image: linear-gradient(270deg, {{=color4}} 2%, {{=color2}} 100%);"></div>
        <div class="pipeline-boxs-bg-on" style="width: {{=percent}}%; background-image: linear-gradient(145deg, {{=color8}} 33%, {{=color6}} 34%, {{=color6}} 59%, {{=color8}} 60%); "></div>
    </div>
    <div class="pipeline-bg"></div>
</div>
{{/if}}

{{if (mode == 'nav')}}
<div class="nav-wrapper {{if editable}} nav-editable {{/if}}">
    <!-- 高亮背景 -->
    <div class="nav-pbg" style="top: calc((var(--mx-tabs-nav-height) + var(--mx-tabs-nav-margin-gap)) * {{=(selectedIndex + subCount)}});"></div>

    {{each list as item index}}
    <div class="nav-line 
        {{if item.highlight}} nav-highlight {{/if}} 
        {{if item.finished}} nav-finished {{/if}} 
        {{if (item.value == selected)}} 
            nav-cur 
        {{else}}
            {{if item.disabled}} nav-disabled {{/if}}
        {{/if}}"
        {{if (editable && !item.disabled)}} mx-click="@{select.parent}({index:'{{=index}}'})"  {{/if}}>
        <div class="nav">
            <!-- 数值 or 已完成图标 -->
            <span class="nav-idx">
                {{if (item.finished || (index == list.length - 1))}}
                <i class="idx mc-iconfont">&#xe67a;</i>
                {{else}}
                <span class="idx">{{=(index + 1)}}</span>
                {{/if}}
            </span>

            <!-- 文案 -->
            <span class="nav-text">
                {{=item.text}}
                {{if item.icon}}<img src="{{=item.icon}}"/>{{/if}}
                {{if item.iconTip}}<mx-popover class="mc-iconfont mc-tip-iconfont" content="{{=item.iconTip}}">&#xe72f;</mx-popover>{{/if}}
            </span>
                
            {{if (item.value == selected)}}
                <!-- 选中态 -->
            {{else}}
                <!-- 锁定状态 -->
                {{if item.disabled}}
                <i class="mc-iconfont nav-lock">&#xe69d;</i>
                {{/if}}
            {{/if}}
        </div>  
    </div>

    {{if (!item.disabled && item.subs && item.subs.length)}}
        {{each item.subs as sub subIndex}}
        <div class="nav-line 
            {{if item.finished}} nav-finished {{/if}} 
            {{if (sub.value == selected)}} nav-cur {{/if}}"
            {{if (editable && !sub.disabled)}} mx-click="@{select.sub}({index:'{{=index}}',subIndex:'{{=subIndex}}'})"  {{/if}}>
            <div class="nav nav-child">
                <span class="nav-text">
                    {{=sub.text}}
                    {{if sub.icon}}<img src="{{=sub.icon}}"/>{{/if}}
                    {{if sub.iconTip}}<mx-popover class="mc-iconfont mc-tip-iconfont" content="{{=sub.iconTip}}">&#xe72f;</mx-popover>{{/if}}
                </span>
            </div>  
        </div>
        {{/each}}
    {{/if}}
    {{/each}}
</div>
{{/if}}

{{if (mode == 'circle')}}
<div class="steps">
    {{each list as item index}}
    <div class="clearfix step {{if (index == selected)}} current {{/if}} locked">
        <div class="circle">{{=(index + 1)}}</div>
        <div class="title">
            {{=item.title}}
            {{if item.tip}}
            <mx-popover class="mc-iconfont mc-tip-iconfont" content="{{!item.tip}}" width="280">&#xe72f;</mx-popover>
            {{/if}}
        </div>
    </div>
    {{/each}}
</div>
{{/if}}

